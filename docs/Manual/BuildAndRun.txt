## Prerequisites
Laptop
 - Docker-Desktop
   Engine: 28.5.1
   Compose: v2.40.3-desktop.1
   Kubernetes: v1.34.1
   Credential Helper: v0.9.4

## STEP 1 — Create an AWS IAM user for graphapp development
 - Jot down Access Key / Secret Key for CLI/eksctl
 - Attatch policies directly, AdministratorAccess, enable console access

## STEP 2 - Install CLI tools on your LapTop
 - Install AWS CLI
   > brew install awscli
   > aws configure # Enter the Access Key, Secret Key, default region (e.g., us-east-1), output format (json).
 - Install kubectl
   > brew install kubectl
 - Install eksctl
   > brew tap weaveworks/tap
   > brew install weaveworks/tap/eksctl
 - Install Helm (optional, for ALB controller)
   > brew install helm
 - Install Docker Desktop
   > sudo brew install --cask docker

## STEP 3 - Create EKS Cluster
 - Create cluster
```
eksctl create cluster \
  --name graphapp-eks-cluster \
  --region ap-northeast-1 \
  --node-type t3.medium \
  --nodes 2
```
 - Test cluster
```
kubectl get nodes
```

## STEP 4 - Prepare Container Images
```
# Create repositories
aws ecr create-repository --repository-name graphapp-eks-frontend
aws ecr create-repository --repository-name graphapp-eks-backend

# Login Docker to ECR
aws ecr get-login-password \
  | docker login --username AWS --password-stdin <AWS_ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com

# Tag images
docker tag frontend:latest <ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com/my-frontend:latest
docker tag backend:latest <ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com/my-backend:latest

# Push images
docker push <ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com/my-frontend:latest
docker push <ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com/my-backend:latest
```

## STEP 5 Deploy Your Kubernetes App


## STEP 1 — Build Docker images locally
> bash scripts/build_images.sh

## STEP 2 — Start Kubernetes namespace and resources
> bash scripts/deploy_local.sh

## STEP 3 — Verify that everything is running
> kubectl get pods -n graphapp
> kubectl get service -n graphapp
> kubectl get ingress -n graphapp # check CLASS is nginx and ADDRESS is allocated

If any pod is not Running, check logs:
> kubectl logs -n graphapp <pod-name>

Start portforwarding to access the Ingress from web browsers
> kubectl port-forward --namespace=ingress-nginx service/ingress-nginx-controller 8080:80

(Optional) — Check frontend and backend logs (-f show logs continuously)
> kubectl logs -f -n graphapp deployment/frontend-deployment # frontend
> kubectl logs -f -n graphapp deployment/backend-deployment # backend

## STEP 4 — Access the frontend in your browser
> open http://graphapp.local:8080

## STEP 5 — Tear everything down (if needed)
> bash scripts/delete_all.sh
